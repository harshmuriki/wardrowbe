# Caddy development config with self-signed TLS
# Add to /etc/hosts: 127.0.0.1 wardrobe.local

wardrobe.local {
    tls internal

    # NextAuth routes go to frontend
    handle /api/auth/* {
        reverse_proxy frontend:3000
    }

    # Backend API routes
    handle /api/* {
        reverse_proxy backend:8000
    }

    # Swagger docs
    handle /docs* {
        reverse_proxy backend:8000
    }
    handle /openapi.json {
        reverse_proxy backend:8000
    }
    handle /redoc* {
        reverse_proxy backend:8000
    }

    # Everything else to frontend
    handle {
        reverse_proxy frontend:3000
    }
}
